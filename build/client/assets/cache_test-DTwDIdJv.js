import{g as q,c as Y,a as G,j as L}from"./jsx-runtime-BqcGwIPo.js";var C={exports:{}},K={exports:{}},A={exports:{}},F;function H(){return F||(F=1,function(_){var u=function(){function v(s,o){return o!=null&&s instanceof o}var a;try{a=Map}catch{a=function(){}}var c;try{c=Set}catch{c=function(){}}var l;try{l=Promise}catch{l=function(){}}function g(s,o,d,p,y){typeof o=="object"&&(d=o.depth,p=o.prototype,y=o.includeNonEnumerable,o=o.circular);var x=[],D=[],M=typeof Buffer<"u";typeof o>"u"&&(o=!0),typeof d>"u"&&(d=1/0);function m(n,E){if(n===null)return null;if(E===0)return n;var f,w;if(typeof n!="object")return n;if(v(n,a))f=new a;else if(v(n,c))f=new c;else if(v(n,l))f=new l(function(j,O){n.then(function(k){j(m(k,E-1))},function(k){O(m(k,E-1))})});else if(g.__isArray(n))f=[];else if(g.__isRegExp(n))f=new RegExp(n.source,r(n)),n.lastIndex&&(f.lastIndex=n.lastIndex);else if(g.__isDate(n))f=new Date(n.getTime());else{if(M&&Buffer.isBuffer(n))return Buffer.allocUnsafe?f=Buffer.allocUnsafe(n.length):f=new Buffer(n.length),n.copy(f),f;v(n,Error)?f=Object.create(n):typeof p>"u"?(w=Object.getPrototypeOf(n),f=Object.create(w)):(f=Object.create(p),w=p)}if(o){var z=x.indexOf(n);if(z!=-1)return D[z];x.push(n),D.push(f)}v(n,a)&&n.forEach(function(j,O){var k=m(O,E-1),U=m(j,E-1);f.set(k,U)}),v(n,c)&&n.forEach(function(j){var O=m(j,E-1);f.add(O)});for(var b in n){var P;w&&(P=Object.getOwnPropertyDescriptor(w,b)),!(P&&P.set==null)&&(f[b]=m(n[b],E-1))}if(Object.getOwnPropertySymbols)for(var I=Object.getOwnPropertySymbols(n),b=0;b<I.length;b++){var S=I[b],T=Object.getOwnPropertyDescriptor(n,S);T&&!T.enumerable&&!y||(f[S]=m(n[S],E-1),T.enumerable||Object.defineProperty(f,S,{enumerable:!1}))}if(y)for(var B=Object.getOwnPropertyNames(n),b=0;b<B.length;b++){var R=B[b],T=Object.getOwnPropertyDescriptor(n,R);T&&T.enumerable||(f[R]=m(n[R],E-1),Object.defineProperty(f,R,{enumerable:!1}))}return f}return m(s,d)}g.clonePrototype=function(o){if(o===null)return null;var d=function(){};return d.prototype=o,new d};function t(s){return Object.prototype.toString.call(s)}g.__objToStr=t;function e(s){return typeof s=="object"&&t(s)==="[object Date]"}g.__isDate=e;function i(s){return typeof s=="object"&&t(s)==="[object Array]"}g.__isArray=i;function h(s){return typeof s=="object"&&t(s)==="[object RegExp]"}g.__isRegExp=h;function r(s){var o="";return s.global&&(o+="g"),s.ignoreCase&&(o+="i"),s.multiline&&(o+="m"),o}return g.__getRegExpFlags=r,g}();_.exports&&(_.exports=u)}(A)),A.exports}const $={},J=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"})),W=q(J);var V;function Q(){return V||(V=1,(function(){var _,u,v=[].splice,a=function(l,g){if(!(l instanceof g))throw new Error("Bound instance method accessed before binding")},c=[].indexOf;u=H(),_=W.EventEmitter,K.exports=(function(){class l extends _{constructor(t={}){super(),this.get=this.get.bind(this),this.mget=this.mget.bind(this),this.set=this.set.bind(this),this.mset=this.mset.bind(this),this.del=this.del.bind(this),this.take=this.take.bind(this),this.ttl=this.ttl.bind(this),this.getTtl=this.getTtl.bind(this),this.keys=this.keys.bind(this),this.has=this.has.bind(this),this.getStats=this.getStats.bind(this),this.flushAll=this.flushAll.bind(this),this.flushStats=this.flushStats.bind(this),this.close=this.close.bind(this),this._checkData=this._checkData.bind(this),this._check=this._check.bind(this),this._isInvalidKey=this._isInvalidKey.bind(this),this._wrap=this._wrap.bind(this),this._getValLength=this._getValLength.bind(this),this._error=this._error.bind(this),this._initErrors=this._initErrors.bind(this),this.options=t,this._initErrors(),this.data={},this.options=Object.assign({forceString:!1,objectValueSize:80,promiseValueSize:80,arrayValueSize:40,stdTTL:0,checkperiod:600,useClones:!0,deleteOnExpire:!0,enableLegacyCallbacks:!1,maxKeys:-1},this.options),this.options.enableLegacyCallbacks&&(console.warn("WARNING! node-cache legacy callback support will drop in v6.x"),["get","mget","set","del","ttl","getTtl","keys","has"].forEach(e=>{var i;i=this[e],this[e]=function(...h){var r,s,o,d;if(o=h,[...h]=o,[r]=v.call(h,-1),typeof r=="function")try{d=i(...h),r(null,d)}catch(p){s=p,r(s)}else return i(...h,r)}})),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.validKeyTypes=["string","number"],this._checkData()}get(t){var e,i;if(a(this,l),(i=this._isInvalidKey(t))!=null)throw i;if(this.data[t]!=null&&this._check(t,this.data[t]))return this.stats.hits++,e=this._unwrap(this.data[t]),e;this.stats.misses++}mget(t){var e,i,h,r,s,o;if(a(this,l),!Array.isArray(t))throw e=this._error("EKEYSTYPE"),e;for(o={},h=0,s=t.length;h<s;h++){if(r=t[h],(i=this._isInvalidKey(r))!=null)throw i;this.data[r]!=null&&this._check(r,this.data[r])?(this.stats.hits++,o[r]=this._unwrap(this.data[r])):this.stats.misses++}return o}set(t,e,i){var h,r,s;if(a(this,l),this.options.maxKeys>-1&&this.stats.keys>=this.options.maxKeys)throw h=this._error("ECACHEFULL"),h;if(this.options.forceString&&!1==="string"&&(e=JSON.stringify(e)),i==null&&(i=this.options.stdTTL),(r=this._isInvalidKey(t))!=null)throw r;return s=!1,this.data[t]&&(s=!0,this.stats.vsize-=this._getValLength(this._unwrap(this.data[t],!1))),this.data[t]=this._wrap(e,i),this.stats.vsize+=this._getValLength(e),s||(this.stats.ksize+=this._getKeyLength(t),this.stats.keys++),this.emit("set",t,e),!0}mset(t){var e,i,h,r,s,o,d,p,y,x;if(a(this,l),this.options.maxKeys>-1&&this.stats.keys+t.length>=this.options.maxKeys)throw e=this._error("ECACHEFULL"),e;for(h=0,d=t.length;h<d;h++){if(o=t[h],{key:s,val:x,ttl:y}=o,y&&typeof y!="number")throw e=this._error("ETTLTYPE"),e;if((i=this._isInvalidKey(s))!=null)throw i}for(r=0,p=t.length;r<p;r++)o=t[r],{key:s,val:x,ttl:y}=o,this.set(s,x,y);return!0}del(t){var e,i,h,r,s,o;for(a(this,l),Array.isArray(t)||(t=[t]),e=0,h=0,s=t.length;h<s;h++){if(r=t[h],(i=this._isInvalidKey(r))!=null)throw i;this.data[r]!=null&&(this.stats.vsize-=this._getValLength(this._unwrap(this.data[r],!1)),this.stats.ksize-=this._getKeyLength(r),this.stats.keys--,e++,o=this.data[r],delete this.data[r],this.emit("del",r,o.v))}return e}take(t){var e;return a(this,l),e=this.get(t),e!=null&&this.del(t),e}ttl(t,e){var i;if(a(this,l),e||(e=this.options.stdTTL),!t)return!1;if((i=this._isInvalidKey(t))!=null)throw i;return this.data[t]!=null&&this._check(t,this.data[t])?(e>=0?this.data[t]=this._wrap(this.data[t].v,e,!1):this.del(t),!0):!1}getTtl(t){var e,i;if(a(this,l),!!t){if((i=this._isInvalidKey(t))!=null)throw i;if(this.data[t]!=null&&this._check(t,this.data[t]))return e=this.data[t].t,e}}keys(){var t;return a(this,l),t=Object.keys(this.data),t}has(t){var e;return a(this,l),e=this.data[t]!=null&&this._check(t,this.data[t]),e}getStats(){return a(this,l),this.stats}flushAll(t=!0){a(this,l),this.data={},this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this._killCheckPeriod(),this._checkData(t),this.emit("flush")}flushStats(){a(this,l),this.stats={hits:0,misses:0,keys:0,ksize:0,vsize:0},this.emit("flush_stats")}close(){a(this,l),this._killCheckPeriod()}_checkData(t=!0){var e,i,h;a(this,l),i=this.data;for(e in i)h=i[e],this._check(e,h);t&&this.options.checkperiod>0&&(this.checkTimeout=setTimeout(this._checkData,this.options.checkperiod*1e3,t),this.checkTimeout!=null&&this.checkTimeout.unref!=null&&this.checkTimeout.unref())}_killCheckPeriod(){if(this.checkTimeout!=null)return clearTimeout(this.checkTimeout)}_check(t,e){var i;return a(this,l),i=!0,e.t!==0&&e.t<Date.now()&&(this.options.deleteOnExpire&&(i=!1,this.del(t)),this.emit("expired",t,this._unwrap(e))),i}_isInvalidKey(t){var e;if(a(this,l),e=typeof t,c.call(this.validKeyTypes,e)<0)return this._error("EKEYTYPE",{type:typeof t})}_wrap(t,e,i=!0){var h,r,s;return a(this,l),this.options.useClones||(i=!1),r=Date.now(),h=0,s=1e3,e===0?h=0:e?h=r+e*s:this.options.stdTTL===0?h=this.options.stdTTL:h=r+this.options.stdTTL*s,{t:h,v:i?u(t):t}}_unwrap(t,e=!0){return this.options.useClones||(e=!1),t.v!=null?e?u(t.v):t.v:null}_getKeyLength(t){return t.toString().length}_getValLength(t){return a(this,l),typeof t=="string"?t.length:this.options.forceString?JSON.stringify(t).length:Array.isArray(t)?this.options.arrayValueSize*t.length:typeof t=="number"?8:typeof(t!=null?t.then:void 0)=="function"?this.options.promiseValueSize:typeof Buffer<"u"&&Buffer!==null&&Buffer.isBuffer(t)?t.length:t!=null&&typeof t=="object"?this.options.objectValueSize*Object.keys(t).length:typeof t=="boolean"?8:0}_error(t,e={}){var i;return a(this,l),i=new Error,i.name=t,i.errorcode=t,i.message=this.ERRORS[t]!=null?this.ERRORS[t](e):"-",i.data=e,i}_initErrors(){var t,e,i;a(this,l),this.ERRORS={},i=this._ERRORS;for(e in i)t=i[e],this.ERRORS[e]=this.createErrorMessage(t)}createErrorMessage(t){return function(e){return t.replace("__key",e.type)}}}return l.prototype._ERRORS={ENOTFOUND:"Key `__key` not found",ECACHEFULL:"Cache max keys amount exceeded",EKEYTYPE:"The key argument has to be of type `string` or `number`. Found: `__key`",EKEYSTYPE:"The keys argument has to be an array.",ETTLTYPE:"The ttl argument has to be a number."},l}).call(this)}).call(Y)),K.exports}(function(){var _;_=C.exports=Q(),_.version="5.1.2"}).call(Y);var X=C.exports;const Z=G(X);function tt(){const _=new Z;let u;function v(c){u=_.get(c),console.log(u),u===void 0&&(u=a(c),_.set(c,u,10)),console.log(u)}function a(c){return console.log("Fetching data from API"),{name:c,price:100}}return L.jsxs("div",{children:[L.jsx("h1",{children:"Cache Test"}),L.jsx("button",{onClick:()=>v("AAPL"),children:"Get Stock Data"}),L.jsx("p",{children:u})]})}export{tt as default};
